(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(e){if(e.ep)return;e.ep=!0;const s=n(e);fetch(e.href,s)}})();let f=[],c=[];async function L(){f=await u("https://661c292fe7b95ad7fa69d7d1.mockapi.io/api/v1/albums"),c=await u("https://661c292fe7b95ad7fa69d7d1.mockapi.io/api/v1/favorites")}async function u(a){return await(await fetch(a)).json()}L();const l=document.getElementById("search-button"),m=document.getElementById("favorites-button"),v=document.getElementById("search-tab"),h=document.getElementById("favorites-tab");m.addEventListener("click",()=>{l.classList.remove("active"),m.classList.add("active"),v.classList.add("d-none"),h.classList.remove("d-none")});l.addEventListener("click",()=>{l.classList.add("active"),m.classList.remove("active"),v.classList.remove("d-none"),h.classList.add("d-none")});const g=document.getElementById("search-form"),p=document.getElementById("search-results");g.addEventListener("submit",async a=>{a.preventDefault();const t=document.getElementById("query").value.trim().toLowerCase();t&&(p.innerHTML="",f.filter(n=>n.albumName.toLowerCase().includes(t)||n.artistName.toLowerCase().includes(t)).forEach(n=>{const o=document.createElement("li");o.classList.add("list-group-item","d-flex","justify-content-between","align-items-start"),p.appendChild(o);const e=document.createElement("div");e.classList.add("ms-2","me-auto"),o.appendChild(e);const s=document.createElement("div");s.classList.add("fw-bold"),s.textContent=n.albumName,e.appendChild(s);const i=document.createElement("span");i.classList.add("badge","bg-primary","rounded-pill"),i.textContent=n.averageRating,s.appendChild(i);const d=document.createElement("span");d.textContent=n.artistName,e.appendChild(d);const r=document.createElement("button");r.classList.add("btn","btn-success"),r.textContent="Add to Favorites",r.addEventListener("click",()=>E(n)),o.appendChild(r)}))});function E(a){c.findIndex(n=>n.id===a.id)===-1&&(c.push(a),b(a))}function y(){const a=document.getElementById("favorites");a.innerHTML="",c.forEach(t=>{const n=document.createElement("li");n.classList.add("list-group-item","d-flex","justify-content-between","align-items-start"),a.appendChild(n);const o=document.createElement("div");o.classList.add("ms-2","me-auto"),n.appendChild(o);const e=document.createElement("div");e.classList.add("fw-bold"),e.textContent=t.albumName,o.appendChild(e);const s=document.createElement("span");s.classList.add("badge","bg-primary","rounded-pill"),s.textContent=t.averageRating,e.appendChild(s);const i=document.createElement("span");i.textContent=t.artistName,o.appendChild(i);const d=document.createElement("button");d.classList.add("btn","btn-success"),d.textContent="Remove from Favorites",d.addEventListener("click",async()=>{await C(t),y()}),n.appendChild(d)})}document.getElementById("favorites-button").addEventListener("click",()=>{y()});async function b(a){const t=new Headers;t.append("content-type","application/json"),t.append("cache","no-store");const n=JSON.stringify(a);return await(await fetch("https://661c292fe7b95ad7fa69d7d1.mockapi.io/api/v1/favorites",{method:"POST",headers:t,body:n,redirect:"follow"})).json()}async function C(a){const t=c.findIndex(n=>n.id===a.id);if(t!==-1)return c.splice(t,1),await(await fetch(`https://661c292fe7b95ad7fa69d7d1.mockapi.io/api/v1/favorites/${a.id}`,{method:"DELETE"})).json()}
